# News Aggregator - PowerShell Setup Guide

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Python 3.10+** - [–°–∫–∞—á–∞—Ç—å —Å python.org](https://www.python.org/downloads/)
2. **Docker Desktop** - [–°–∫–∞—á–∞—Ç—å —Å docker.com](https://www.docker.com/products/docker-desktop/)
3. **PowerShell 5.1+** (–≤–∫–ª—é—á–µ–Ω –≤ Windows 10/11)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```powershell
   git clone <repository-url>
   cd Hakaton
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É:**
   ```powershell
   .\setup.ps1
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env`
   - –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ Telegram API –∫–ª—é—á–∏:
     ```
     TELETHON_API_ID=your_api_id
     TELETHON_API_HASH=your_api_hash
     TELETHON_PHONE=+79999999999
     ```
   - –î–ª—è AI –∞–Ω–∞–ª–∏–∑–∞ –¥–æ–±–∞–≤—å—Ç–µ OpenAI API –∫–ª—é—á (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
     ```
     API_KEY_2=your_openai_api_key
     # –∏–ª–∏
     OPENAI_API_KEY=your_openai_api_key
     ```

4. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ AI –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–¥–ª—è CEG –ø–∞—Ä—Å–µ—Ä–∞):**
   ```powershell
   # –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
   .\venv\Scripts\Activate.ps1
   
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ AI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
   pip install transformers torch accelerate
   ```

## üèÉ‚Äç‚ôÇÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### üöÄ CEG Parser —Å AI –∞–Ω–∞–ª–∏–∑–æ–º (–ù–û–í–û–ï!)

–ó–∞–ø—É—Å–∫–∞–µ—Ç —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä —Å CEG –∞–Ω–∞–ª–∏–∑–æ–º –∏ AI:

```powershell
.\start_ceg_parser.ps1
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ CEG –ø–∞—Ä—Å–µ—Ä–∞:**
- üß† AI-–∞–Ω–∞–ª–∏–∑ –Ω–æ–≤–æ—Å—Ç–µ–π (OpenAI GPT –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π Qwen3-4B)
- üì° –ü–∞—Ä—Å–∏–Ω–≥ Telegram –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- üåê –ü–∞—Ä—Å–∏–Ω–≥ HTML –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Forbes, Interfax, E-disclosure, MOEX)
- üï∏Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π –≤ Neo4j
- üîó CEG –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π
- üìä Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ JSON –æ—Ç–≤–µ—Ç–∞–º–∏
- üîÆ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –±—É–¥—É—â–∏—Ö —Å–æ–±—ã—Ç–∏–π

**–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:**
```powershell
# –í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (Telegram + HTML)
.\start_ceg_parser.ps1

# –¢–æ–ª—å–∫–æ Telegram
.\start_ceg_parser.ps1 -TelegramOnly

# –¢–æ–ª—å–∫–æ HTML
.\start_ceg_parser.ps1 -HTMLOnly
```

### –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã –ª–æ–∫–∞–ª—å–Ω–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–ª–∞–¥–∫–∏:

```powershell
.\start_dev.ps1
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (PostgreSQL, RabbitMQ, Redis)
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç API —Å–µ—Ä–≤–µ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç Telegram –ø–∞—Ä—Å–µ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ  
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç Outbox Relay –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ

### –ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º (Docker)

–ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö:

```powershell
.\start_full.ps1
```

## üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```powershell
.\stop_dev.ps1
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞:
```powershell
.\stop_full.ps1
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã:
```powershell
.\check_health.ps1
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```powershell
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
.\view_logs.ps1

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
.\view_logs.ps1 -Service api -Lines 100
.\view_logs.ps1 -Service telegram -Lines 50
.\view_logs.ps1 -Service postgres -Lines 20
```

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:

| –°–µ—Ä–≤–∏—Å | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| **API Server** | http://localhost:8000 | –û—Å–Ω–æ–≤–Ω–æ–π REST API |
| **API Docs** | http://localhost:8000/docs | Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| **RabbitMQ Management** | http://localhost:15672 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—è–º–∏ (admin/admin123) |
| **Neo4j Browser** | http://localhost:7474 | –ì—Ä–∞—Ñ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (neo4j/password123) |

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:
```powershell
# –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
alembic revision --autogenerate -m "Description"

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
alembic upgrade head

# –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
alembic downgrade -1
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
```powershell
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
.\venv\Scripts\Activate.ps1

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
python scripts\load_sources.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```powershell
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/

# –¢–µ—Å—Ç MOEX –∞–≤—Ç–æ–ø–æ–∏—Å–∫–∞
python scripts\test_moex_auto_search.py
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: PowerShell –Ω–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã
```powershell
# –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ (–∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### –ü—Ä–æ–±–ª–µ–º–∞: Docker –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ WSL2 –≤–∫–ª—é—á–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø–æ—Ä—Ç—ã
netstat -ano | findstr :8000
netstat -ano | findstr :5432
netstat -ano | findstr :5672

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ PID
taskkill /PID <PID> /F
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```powershell
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å PostgreSQL
docker logs news-postgres

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
docker restart news-postgres
```

### –ü—Ä–æ–±–ª–µ–º–∞: CEG –ø–∞—Ä—Å–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```powershell
# –û—à–∏–±–∫–∞ "No module named 'transformers'"
.\venv\Scripts\Activate.ps1
pip install transformers torch accelerate

# –û—à–∏–±–∫–∞ "No API key found"
# –î–æ–±–∞–≤—å—Ç–µ –≤ .env —Ñ–∞–π–ª:
# API_KEY_2=your_openai_api_key

# –û—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –≤ entity_recognition.py
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
```

### –ü—Ä–æ–±–ª–µ–º–∞: AI –º–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```powershell
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª–∏ Qwen3-4B
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ RAM (–º–∏–Ω–∏–º—É–º 8GB)
# –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –º–æ–¥–µ–ª—å –±—É–¥–µ—Ç —Å–∫–∞—á–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

# –î–ª—è OpenAI API
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –∫—Ä–µ–¥–∏—Ç—ã –Ω–∞ API
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Hakaton/
‚îú‚îÄ‚îÄParser.src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ api/               # REST API
‚îÇ   ‚îú‚îÄ‚îÄ core/              # –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ scripts/               # –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ docker/                # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ config/                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ migrations/            # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ setup.ps1             # –£—Å—Ç–∞–Ω–æ–≤–∫–∞
‚îú‚îÄ‚îÄ start_dev.ps1         # –ó–∞–ø—É—Å–∫ dev —Ä–µ–∂–∏–º–∞
‚îú‚îÄ‚îÄ start_full.ps1        # –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
‚îú‚îÄ‚îÄ stop_dev.ps1          # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ dev —Ä–µ–∂–∏–º–∞
‚îú‚îÄ‚îÄ stop_full.ps1         # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
‚îú‚îÄ‚îÄ check_health.ps1      # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
‚îî‚îÄ‚îÄ view_logs.ps1         # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `.\view_logs.ps1`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã: `.\check_health.ps1`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã: `.\stop_dev.ps1` ‚Üí `.\start_dev.ps1`
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Å –ª–æ–≥–∞–º–∏ –æ—à–∏–±–æ–∫
